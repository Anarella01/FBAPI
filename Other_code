<?php
include 'fbsdk/autoload.php';
$fb = new Facebook\Facebook([
  'app_id' => '1433295070072583',
  'app_secret' => 'cd797bbc458769979bfc51a38a562428',
  'default_graph_version' => 'v2.9',
  ]);
$accessToken = 'EAAUXkwOCjwcBAPMSQJ8UNJZAEveAi2DWw9dxgxwMyKROJ4mxxmraUy6VNkSZCqtAtYCzyyPhS7Yb54rGxY7K7lcYamDbPXvN3Btm0nNxZCHRG47izC4ZBwSBDTppjI9qu0JdXBhUCQGT1jVdmpABqka9OXjYoDLGfsh9OreAxmUME9Gf3yD1';
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get('/me?fields=id,name', $accessToken);
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}

$user = $response->getGraphUser();

echo 'Name: ' . $user['name'];
//-----------------PROFILEPHOTO----------///
use Facebook\FacebookSession;
FacebookSession::setDefaultApplication('1433295070072583', 'cd797bbc458769979bfc51a38a562428');
// If you already have a valid access token:
$session = new FacebookSession('EAAUXkwOCjwcBAPMSQJ8UNJZAEveAi2DWw9dxgxwMyKROJ4mxxmraUy6VNkSZCqtAtYCzyyPhS7Yb54rGxY7K7lcYamDbPXvN3Btm0nNxZCHRG47izC4ZBwSBDTppjI9qu0JdXBhUCQGT1jVdmpABqka9OXjYoDLGfsh9OreAxmUME9Gf3yD1');
// If you're making app-level requests:
$session = FacebookSession::newAppSession();
// To validate the session:
try {
  $session->validate();
} catch (FacebookRequestException $ex) {
  // Session not valid, Graph API returned an exception with the reason.
  echo $ex->getMessage();
} catch (\Exception $ex) {
  // Graph API returned info, but it may mismatch the current app or have expired.
  echo $ex->getMessage();
}
use Facebook\FacebookRequest;
use Facebook\GraphObject;
use Facebook\FacebookRequestException;
if($session) {
  try {
    // Upload to a user's profile. The photo will be in the
    // first album in the profile. You can also upload to
    // a specific album by using /ALBUM_ID as the path     
    $response = (new FacebookRequest(
      $session, 'POST', '/me/photos', array(
        'source' => new CURLFile('C:/Users/Lianel/Desktop/LIANEL/', 'luls.png'),
        'message' => 'User provided message'
      )
    ))->execute()->getGraphObject();
    // If you're not using PHP 5.5 or later, change the file reference to:
    // 'source' => '@/path/to/file.name'
    echo "Posted with id: " . $response->getProperty('id');
  } catch(FacebookRequestException $e) {
    echo "Exception occured, code: " . $e->getCode();
    echo " with message: " . $e->getMessage();
  }   
}
?>
